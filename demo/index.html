<!DOCTYPE html>
<html lang="en" class="bg-gray-50 dark:bg-gray-900">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Typo Fixer Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'media',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f5f3ff',
                            100: '#ede9fe',
                            200: '#ddd6fe',
                            300: '#c4b5fd',
                            400: '#a78bfa',
                            500: '#8b5cf6',
                            600: '#7c3aed',
                            700: '#6d28d9',
                            800: '#5b21b6',
                            900: '#4c1d95',
                        },
                    }
                }
            }
        }
    </script>
</head>

<body class="min-h-screen text-gray-900 dark:text-gray-100">
    <!-- GitHub Corner -->
    <a href="https://github.com/Patrick-Ullrich/email-typo-fixer" class="github-corner"
        aria-label="View source on GitHub">
        <svg width="80" height="80" viewBox="0 0 250 250"
            class="absolute top-0 right-0 border-0 text-gray-900 dark:text-white" style="fill: #7c3aed;">
            <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
            <path
                d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
                fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
            <path
                d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
                fill="currentColor" class="octo-body"></path>
        </svg>
    </a>

    <main class="container mx-auto px-4 py-8 max-w-3xl">
        <div class="text-center mb-8">
            <h1
                class="text-4xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-primary-600 to-primary-400">
                Email Typo Fixer
            </h1>
            <p class="text-gray-600 dark:text-gray-400">
                Try out the email typo fixer by entering an email address with typos below.
                The library will attempt to fix common mistakes and suggest corrections.
            </p>
        </div>

        <!-- Example Buttons -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 mb-8">
            <button
                class="example-button text-left px-4 py-2 text-sm bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-primary-300 dark:hover:border-primary-700 transition-colors"
                data-email="user@gmial.com">
                user@gmial.com
            </button>
            <button
                class="example-button text-left px-4 py-2 text-sm bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-primary-300 dark:hover:border-primary-700 transition-colors"
                data-email="John Doe <john.doe@gmail.com>">
                John Doe &lt;john.doe@gmail.com&gt;
            </button>
            <button
                class="example-button text-left px-4 py-2 text-sm bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-primary-300 dark:hover:border-primary-700 transition-colors"
                data-email="user@gmail.com@gmail.com">
                user@gmail.com@gmail.com
            </button>
            <button
                class="example-button text-left px-4 py-2 text-sm bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-primary-300 dark:hover:border-primary-700 transition-colors"
                data-email="user[at]gmail[dot]com">
                user[at]gmail[dot]com
            </button>
            <button
                class="example-button text-left px-4 py-2 text-sm bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-primary-300 dark:hover:border-primary-700 transition-colors"
                data-email="user@outl00k.com">
                user@outl00k.com
            </button>
            <button
                class="example-button text-left px-4 py-2 text-sm bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-primary-300 dark:hover:border-primary-700 transition-colors"
                data-email="user,name@gmail.com;">
                user,name@gmail.com;
            </button>
        </div>

        <!-- Main Form -->
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 mb-6">
            <div class="mb-6">
                <label for="email" class="block text-sm font-medium mb-2">Email Address</label>
                <input type="text" id="email" name="email"
                    class="w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 focus:border-primary-300 dark:focus:border-primary-700 focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800 outline-none transition-colors"
                    placeholder="Enter an email with typos...">
            </div>

            <!-- Results -->
            <div id="result" class="hidden mb-6">
                <div id="result-content"></div>
            </div>
        </div>

        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 mb-6">
            <!-- Advanced Options -->
            <div class="mb-6">
                <h3 class="text-sm font-medium text-gray-600 dark:text-gray-400 mb-4">Advanced Options</h3>
                <div class="space-y-4">
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div>
                            <label for="distance" class="block text-sm font-medium mb-2">Domain Match Distance</label>
                            <input type="number" id="distance" name="distance" value="3" min="1" max="10"
                                class="w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 focus:border-primary-300 dark:focus:border-primary-700 focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800 outline-none transition-colors">
                            <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Lower values are more strict
                                (default: 3)</p>
                        </div>
                        <div>
                            <label for="domains" class="block text-sm font-medium mb-2">Custom Domains</label>
                            <input type="text" id="domains" name="domains"
                                class="w-full px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 focus:border-primary-300 dark:focus:border-primary-700 focus:ring-2 focus:ring-primary-200 dark:focus:ring-primary-800 outline-none transition-colors"
                                placeholder="comma-separated domains">
                            <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">e.g.: company.com, example.org</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script type="module">
        import { emailTypoFixer, DEFAULT_DOMAINS } from '../dist/index.js';

        const emailInput = document.getElementById('email');
        const distanceInput = document.getElementById('distance');
        const domainsInput = document.getElementById('domains');
        const result = document.getElementById('result');
        const resultContent = document.getElementById('result-content');

        function getCustomDomains() {
            const customDomains = domainsInput.value
                .split(',')
                .map(d => d.trim())
                .filter(d => d);
            return customDomains.length > 0 ? [...DEFAULT_DOMAINS, ...customDomains] : undefined;
        }

        function updateResult() {
            const email = emailInput.value.trim();
            if (!email) {
                result.classList.add('hidden');
                return;
            }

            const options = {
                domainMatchDistance: parseInt(distanceInput.value, 10),
                domains: getCustomDomains()
            };

            const correction = emailTypoFixer(email, options);
            result.classList.remove('hidden');

            if (correction.hasCorrection) {
                resultContent.innerHTML = `
                    <div class="space-y-2">
                        <p class="text-sm text-primary-600 dark:text-primary-400">âœ¨ Suggested correction:</p>
                        <pre class="text-sm bg-gray-50 dark:bg-gray-900 p-3 rounded-lg"><code>${correction.suggested}</code></pre>
                    </div>
                `;
            } else {
                resultContent.innerHTML = `
                    <div class="space-y-2">
                        <p class="text-sm text-gray-600 dark:text-gray-400">No corrections needed or possible corrections found.</p>
                        <pre class="text-sm bg-gray-50 dark:bg-gray-900 p-3 rounded-lg"><code>${correction.original}</code></pre>
                    </div>
                `;
            }
        }

        // Event listeners
        emailInput.addEventListener('input', updateResult);
        distanceInput.addEventListener('change', updateResult);
        domainsInput.addEventListener('input', updateResult);

        // Example buttons
        document.querySelectorAll('.example-button').forEach(button => {
            button.addEventListener('click', () => {
                emailInput.value = button.dataset.email;
                updateResult();
            });
        });
    </script>
</body>

</html>